<tool id="busco" name="Busco" profile="20.01" version="5.2.2+galaxy1">
    <description>assess genome assembly and annotation completeness</description>
    <macros> 
        <token name="@TEST_TOKEN@">test_token_val</token>
        <import>macros.xml</import>
    </macros>
    <requirements>
        <requirement type="package" version="5.2.2">busco</requirement>
        <requirement type="package" version="1.34">tar</requirement>
        <requirement type="package" version="1">fonts-conda-ecosystem</requirement>
    </requirements>
    <version_command>busco --version</version_command>
    <command>
if [ -z "\$AUGUSTUS_CONFIG_PATH" ] ; then BUSCO_PATH=\$(dirname \$(which busco)) ; export AUGUSTUS_CONFIG_PATH=\$(realpath \${BUSCO_PATH}/../config) ; fi &amp;&amp;
cp -r "\$AUGUSTUS_CONFIG_PATH/" augustus_dir/ &amp;&amp;
export AUGUSTUS_CONFIG_PATH=`pwd`/augustus_dir/ &amp;&amp;

#if $busco_mode.mode == 'geno' and $busco_mode.use_augustus.use_augustus_selector == 'yes' and $busco_mode.use_augustus.aug_prediction.augustus_mode == 'history':
    ## Using an augustus model from history, we need to unzip it and let augustus find it
    mkdir -p 'augustus_dir/species/' &amp;&amp;
    tar -C 'augustus_dir/species/' -xzf '${busco_mode.use_augustus.aug_prediction.augustus_model}' &amp;&amp;
#end if

busco
--in '${input}'
--update-data
--mode '${busco_mode.mode}'
--out busco_galaxy
--cpu \${GALAXY_SLOTS:-4}
--evalue ${adv.evalue}
--limit ${adv.limit}

#if $lineage.lineage_mode == "auto_detect":
    $lineage.auto_lineage
#else if $lineage.lineage_mode == "select_lineage":
    --lineage_dataset '${lineage.lineage_dataset}'
#end if
#if $busco_mode.mode == 'geno' and $busco_mode.use_augustus.use_augustus_selector == 'yes':

    ${busco_mode.use_augustus.long}
    --augustus

    #if $busco_mode.use_augustus.aug_prediction.augustus_mode == 'builtin':
        --augustus_species '${busco_mode.use_augustus.aug_prediction.augustus_species}'
    #else if $busco_mode.use_augustus.aug_prediction.augustus_mode == 'history':
        --augustus_species local
    #end if
#end if

#if $adv.outputs and 'image' in $adv.outputs:
    &amp;&amp;
    mkdir BUSCO_summaries
    &amp;&amp;
    ls -l busco_galaxy/run_*/ &amp;&amp;
    cp busco_galaxy/short_summary.*.txt BUSCO_summaries/
    &amp;&amp;
    generate_plot.py -wd BUSCO_summaries -rt specific
#end if

    </command>
    <inputs>
        <param type="data" name="input" format="fasta" label="Sequences to analyse" help="Can be an assembled genome or transcriptome (DNA), or protein sequences from an annotated gene set." />
        <conditional name="busco_mode">
            <param argument="--mode" type="select" label="Mode">
                <option value="geno">Genome assemblies (DNA)</option>
                <option value="tran">Transcriptome assemblies (DNA)</option>
                <option value="prot">annotated gene sets (protein)</option>
            </param>
            <when value="geno">
                <conditional name="use_augustus">
                    <param name="use_augustus_selector" type="select" label="Use Augustus instead of Metaeuk">
                        <option value="yes">Yes, use Augustus</option>
                        <option value="no" selected="true">Use Metaeuk</option>
                    </param>
                    <when value="no" />
                    <when value="yes">
                        <conditional name="aug_prediction">
                            <param name="augustus_mode" type="select" label="Augustus species model">
                                <option value="no" selected="true">Use the default species for selected lineage</option>
                                <option value="builtin">Use another predefined species model</option>
                                <option value="history">Use a custom species model</option>
                            </param>
                            <when value="no" />
                            <when value="history">
                                <param name="augustus_model" type="data" format="augustus" label="Augustus model" />
                            </when>
                            <when value="builtin">
                                <param name="augustus_species" type="select" label="Augustus species model">
                                    <option value="human">Homo sapiens</option>
        <option value="fly">Drosophila melanogaster</option>
        <option value="arabidopsis">Arabidopsis thaliana</option>
        <option value="brugia ">Brugia malayi</option>
        <option value="aedes">Aedes aegypti</option>
        <option value="tribolium2012">Tribolium castaneum</option>
        <option value="schistosoma">Schistosoma mansoni</option>
        <option value="tetrahymena">Tetrahymena thermophila</option>
        <option value="galdieria">Galdieria sulphuraria</option>
        <option value="maize">Zea mays</option>
        <option value="toxoplasma">Toxoplasma gondii</option>
        <option value="caenorhabditis ">Caenorhabditis elegans</option>
        <option value="aspergillus_fumigatus">Aspergillus fumigatus</option>
        <option value="aspergillus_nidulans ">Aspergillus nidulans</option>
        <option value="aspergillus_oryzae ">Aspergillus oryzae</option>
        <option value="aspergillus_terreus">Aspergillus terreus</option>
        <option value="botrytis_cinerea ">Botrytis cinerea</option>
        <option value="candida_albicans ">Candida albicans</option>
        <option value="candida_guilliermondii ">Candida guilliermondii</option>
        <option value="candida_tropicalis ">Candida tropicalis</option>
        <option value="chaetomium_globosum">Chaetomium globosum</option>
        <option value="coccidioides_immitis">Coccidioides immitis</option>
        <option value="coprinus">Coprinus cinereus</option>
        <option value="coprinus_cinereus">Coprinus cinereus</option>
        <option value="cryptococcus_neoformans_gattii">Cryptococcus neoformans gattii</option>
        <option value="cryptococcus_neoformans_neoformans_B">Cryptococcus neoformans neoformans</option>
        <option value="cryptococcus_neoformans_neoformans_JEC21">Cryptococcus neoformans neoformans</option>
        <option value="cryptococcus">Cryptococcus neoformans</option>
        <option value="debaryomyces_hansenii">Debaryomyces hansenii</option>
        <option value="encephalitozoon_cuniculi_GB">Encephalitozoon cuniculi</option>
        <option value="eremothecium_gossypii">Eremothecium gossypii</option>
        <option value="fusarium_graminearum ">Fusarium graminearum</option>
        <option value="histoplasma_capsulatum ">Histoplasma capsulatum</option>
        <option value="histoplasma">Histoplasma capsulatum</option>
        <option value="kluyveromyces_lactis ">Kluyveromyces lactis</option>
        <option value="laccaria_bicolor ">Laccaria bicolor</option>
        <option value="lamprey">Petromyzon marinus</option>
        <option value="leishmania_tarentolae">Leishmania tarentolae</option>
        <option value="lodderomyces_elongisporus">Lodderomyces elongisporus</option>
        <option value="magnaporthe_grisea ">Magnaporthe grisea</option>
        <option value="neurospora_crassa">Neurospora crassa</option>
        <option value="phanerochaete_chrysosporium">Phanerochaete chrysosporium</option>
        <option value="pichia_stipitis">Pichia stipitis</option>
        <option value="rhizopus_oryzae">Rhizopus oryzae</option>
        <option value="saccharomyces_cerevisiae_S288C">Saccharomyces cerevisiae</option>
        <option value="saccharomyces_cerevisiae_rm11-1a_1">Saccharomyces cerevisiae</option>
        <option value="saccharomyces">Saccharomyces cerevisiae</option>
        <option value="schizosaccharomyces_pombe">Schizosaccharomyces pombe</option>
        <option value="trichinella">Trichinella spiralis</option>
        <option value="ustilago_maydis">Ustilago maydis</option>
        <option value="yarrowia_lipolytica">Yarrowia lipolytica</option>
        <option value="nasonia">Nasonia vitripennis</option>
        <option value="tomato">Solanum lycopersicum</option>
        <option value="chlamydomonas">Chlamydomonas reinhardtii</option>
        <option value="amphimedon">Amphimedon queenslandica</option>
        <option value="pneumocystis">Pneumocystis jirovecii</option>
        <option value="chicken">Gallus gallus domesticus (chicken)</option>
        <option value="cacao">Theobroma cacao (cacao)</option>
        <option value="heliconius_melpomene1">Heliconius melpomene</option>
        <option value="xenoturbella">Xenoturbella</option>
        <option value="E_coli_K12">E coli K12</option>
        <option value="c_elegans_trsk">c elegans trsk</option>
        <option value="camponotus_floridanus">Camponotus floridanus</option>
        <option value="coyote_tobacco">Coyote tobacco</option>
        <option value="s_aureus">Staphylococcus aureus</option>
        <option value="thermoanaerobacter_tengcongensis">Thermoanaerobacter tengcongensis</option>
        <option value="wheat">wheat</option>
        <option value="zebrafish">Danio rerio</option>
        <option value="anidulans">Aspergillus nidulans</option>
        <option value="bombus_impatiens1">Bombus impatiens1</option>
        <option value="bombus_terrestris2">Bombus terrestris2</option>
        <option value="botrytis_cinerea">Botrytis cinerea</option>
        <option value="brugia_malayi">Brugia malayi</option>
        <option value="conidiobolus_coronatus">Conidiobolus coronatus</option>
        <option value="cryptococcus_neoformans">Cryptococcus neoformans</option>
        <option value="culex_pipiens">Culex pipiens</option>
        <option value="elephant_shark">Callorhinchus milii</option>
        <option value="honeybee1">Apis mellifera</option>
        <option value="phanerochaete_chrysosporium">Phanerochaete chrysosporium</option>
        <option value="pea_aphid">Acyrthosiphon pisum</option>
        <option value="rhodnius_prolixus">Rhodnius prolixus</option>
        <option value="ustilago_maydis">Ustilago maydis</option>
        <option value="verticillium_albo_atrum1">Verticillium albo atrum1</option>
        <option value="verticillium_longisporum1">Verticillium longisporum1</option>
        <option value="Xipophorus_maculatus">Xipophorus_maculatus</option>
        <option value="adorsata">adorsata</option>
        <option value="ancylostoma_ceylanicum">ancylostoma_ceylanicum</option>
        <option value="maker2_athal1">maker2_athal1</option>
        <option value="maker2_c_elegans1">maker2_c_elegans1</option>
        <option value="maker2_dmel1">maker2_dmel1</option>
        <option value="maker2_spomb1">maker2_spomb1</option>
        <option value="parasteatoda">parasteatoda</option>
        <option value="rice">rice</option>
        <option value="schistosoma2">schistosoma2</option>
        <option value="sulfolobus_solfataricus">sulfolobus_solfataricus</option>
    </param>
                            </when>
                        </conditional>
                        <param argument="--long" type="boolean" checked="false" truevalue="--long" falsevalue="" label="Optimization mode Augustus self-training" help="Adds considerably to run time, but can improve results for some non-model organisms" />
                    </when>
                </conditional>
            </when>
            <when value="tran" />
            <when value="prot" />
        </conditional>
        <conditional name="lineage">
            <param name="lineage_mode" type="select" label="Auto-detect or select lineage?" help="">
                <option value="auto_detect">Auto-detect</option>
                <option value="select_lineage">Select lineage</option>
            </param>
            <when value="auto_detect">
                <param name="auto_lineage" type="select" label="Run auto-lineage to find optimal lineage path">
                    <option value="--auto-lineage">Run auto-lineage to find optimum lineage path</option>
                    <option value="--auto-lineage-prok">Run auto-lineage just on non-eukaryote trees to find optimum lineage path</option>
                    <option value="--auto-lineage-euk">Run auto-placement just on eukaryote tree to find optimum lineage path</option>
                </param>
            </when>
            <when value="select_lineage">
                <param argument="--lineage_dataset" type="select" label="Lineage">
                    <option value="acidobacteria_odb10">Acidobacteria</option>
        <option value="aconoidasida_odb10">Aconoidasida</option>
        <option value="actinobacteria_class_odb10">Actinobacteria class</option>
        <option value="actinobacteria_phylum_odb10">Actinobacteria phylum</option>
        <option value="actinopterygii_odb10">Actinopterygii</option>
        <option value="agaricales_odb10">Agaricales</option>
        <option value="agaricomycetes_odb10">Agaricomycetes</option>
        <option value="alphaproteobacteria_odb10">Alphaproteobacteria</option>
        <option value="alteromonadales_odb10">Alteromonadales</option>
        <option value="alveolata_odb10">Alveolata</option>
        <option value="apicomplexa_odb10">Apicomplexa</option>
        <option value="aquificae_odb10">Aquificae</option>
        <option value="arachnida_odb10">Arachnida</option>
        <option value="archaea_odb10">Archaea</option>
        <option value="arthropoda_odb10">Arthropoda</option>
        <option value="ascomycota_odb10">Ascomycota</option>
        <option value="aves_odb10">Aves</option>
        <option value="bacillales_odb10">Bacillales</option>
        <option value="bacilli_odb10">Bacilli</option>
        <option value="bacteria_odb10">Bacteria</option>
        <option value="bacteroidales_odb10">Bacteroidales</option>
        <option value="bacteroidetes-chlorobi_group_odb10">Bacteroidetes-chlorobi group</option>
        <option value="bacteroidetes_odb10">Bacteroidetes</option>
        <option value="bacteroidia_odb10">Bacteroidia</option>
        <option value="basidiomycota_odb10">Basidiomycota</option>
        <option value="betaproteobacteria_odb10">Betaproteobacteria</option>
        <option value="boletales_odb10">Boletales</option>
        <option value="brassicales_odb10">Brassicales</option>
        <option value="burkholderiales_odb10">Burkholderiales</option>
        <option value="campylobacterales_odb10">Campylobacterales</option>
        <option value="capnodiales_odb10">Capnodiales</option>
        <option value="carnivora_odb10">Carnivora</option>
        <option value="cellvibrionales_odb10">Cellvibrionales</option>
        <option value="cetartiodactyla_odb10">Cetartiodactyla</option>
        <option value="chaetothyriales_odb10">Chaetothyriales</option>
        <option value="chlamydiae_odb10">Chlamydiae</option>
        <option value="chlorobi_odb10">Chlorobi</option>
        <option value="chloroflexi_odb10">Chloroflexi</option>
        <option value="chlorophyta_odb10">Chlorophyta</option>
        <option value="chromatiales_odb10">Chromatiales</option>
        <option value="chroococcales_odb10">Chroococcales</option>
        <option value="clostridia_odb10">Clostridia</option>
        <option value="clostridiales_odb10">Clostridiales</option>
        <option value="coccidia_odb10">Coccidia</option>
        <option value="coriobacteriales_odb10">Coriobacteriales</option>
        <option value="coriobacteriia_odb10">Coriobacteriia</option>
        <option value="corynebacteriales_odb10">Corynebacteriales</option>
        <option value="cyanobacteria_odb10">Cyanobacteria</option>
        <option value="cyprinodontiformes_odb10">Cyprinodontiformes</option>
        <option value="cytophagales_odb10">Cytophagales</option>
        <option value="cytophagia_odb10">Cytophagia</option>
        <option value="delta-epsilon-subdivisions_odb10">Delta-epsilon-subdivisions</option>
        <option value="deltaproteobacteria_odb10">Deltaproteobacteria</option>
        <option value="desulfobacterales_odb10">Desulfobacterales</option>
        <option value="desulfovibrionales_odb10">Desulfovibrionales</option>
        <option value="desulfurococcales_odb10">Desulfurococcales</option>
        <option value="desulfuromonadales_odb10">Desulfuromonadales</option>
        <option value="diptera_odb10">Diptera</option>
        <option value="dothideomycetes_odb10">Dothideomycetes</option>
        <option value="embryophyta_odb10">Embryophyta</option>
        <option value="endopterygota_odb10">Endopterygota</option>
        <option value="enterobacterales_odb10">Enterobacterales</option>
        <option value="entomoplasmatales_odb10">Entomoplasmatales</option>
        <option value="epsilonproteobacteria_odb10">Epsilonproteobacteria</option>
        <option value="euarchontoglires_odb10">Euarchontoglires</option>
        <option value="eudicots_odb10">Eudicots</option>
        <option value="euglenozoa_odb10">Euglenozoa</option>
        <option value="eukaryota_odb10">Eukaryota</option>
        <option value="eurotiales_odb10">Eurotiales</option>
        <option value="eurotiomycetes_odb10">Eurotiomycetes</option>
        <option value="euryarchaeota_odb10">Euryarchaeota</option>
        <option value="eutheria_odb10">Eutheria</option>
        <option value="fabales_odb10">Fabales</option>
        <option value="firmicutes_odb10">Firmicutes</option>
        <option value="flavobacteriales_odb10">Flavobacteriales</option>
        <option value="flavobacteriia_odb10">Flavobacteriia</option>
        <option value="fungi_odb10">Fungi</option>
        <option value="fusobacteria_odb10">Fusobacteria</option>
        <option value="fusobacteriales_odb10">Fusobacteriales</option>
        <option value="gammaproteobacteria_odb10">Gammaproteobacteria</option>
        <option value="glires_odb10">Glires</option>
        <option value="glomerellales_odb10">Glomerellales</option>
        <option value="halobacteria_odb10">Halobacteria</option>
        <option value="halobacteriales_odb10">Halobacteriales</option>
        <option value="haloferacales_odb10">Haloferacales</option>
        <option value="helotiales_odb10">Helotiales</option>
        <option value="hemiptera_odb10">Hemiptera</option>
        <option value="hymenoptera_odb10">Hymenoptera</option>
        <option value="hypocreales_odb10">Hypocreales</option>
        <option value="insecta_odb10">Insecta</option>
        <option value="lactobacillales_odb10">Lactobacillales</option>
        <option value="laurasiatheria_odb10">Laurasiatheria</option>
        <option value="legionellales_odb10">Legionellales</option>
        <option value="leotiomycetes_odb10">Leotiomycetes</option>
        <option value="lepidoptera_odb10">Lepidoptera</option>
        <option value="liliopsida_odb10">Liliopsida</option>
        <option value="mammalia_odb10">Mammalia</option>
        <option value="metazoa_odb10">Metazoa</option>
        <option value="methanobacteria_odb10">Methanobacteria</option>
        <option value="methanococcales_odb10">Methanococcales</option>
        <option value="methanomicrobia_odb10">Methanomicrobia</option>
        <option value="methanomicrobiales_odb10">Methanomicrobiales</option>
        <option value="micrococcales_odb10">Micrococcales</option>
        <option value="microsporidia_odb10">Microsporidia</option>
        <option value="mollicutes_odb10">Mollicutes</option>
        <option value="mollusca_odb10">Mollusca</option>
        <option value="mucorales_odb10">Mucorales</option>
        <option value="mucoromycota_odb10">Mucoromycota</option>
        <option value="mycoplasmatales_odb10">Mycoplasmatales</option>
        <option value="natrialbales_odb10">Natrialbales</option>
        <option value="neisseriales_odb10">Neisseriales</option>
        <option value="nematoda_odb10">Nematoda</option>
        <option value="nitrosomonadales_odb10">Nitrosomonadales</option>
        <option value="nostocales_odb10">Nostocales</option>
        <option value="oceanospirillales_odb10">Oceanospirillales</option>
        <option value="onygenales_odb10">Onygenales</option>
        <option value="oscillatoriales_odb10">Oscillatoriales</option>
        <option value="passeriformes_odb10">Passeriformes</option>
        <option value="pasteurellales_odb10">Pasteurellales</option>
        <option value="planctomycetes_odb10">Planctomycetes</option>
        <option value="plasmodium_odb10">Plasmodium</option>
        <option value="pleosporales_odb10">Pleosporales</option>
        <option value="poales_odb10">Poales</option>
        <option value="polyporales_odb10">Polyporales</option>
        <option value="primates_odb10">Primates</option>
        <option value="propionibacteriales_odb10">Propionibacteriales</option>
        <option value="proteobacteria_odb10">Proteobacteria</option>
        <option value="pseudomonadales_odb10">Pseudomonadales</option>
        <option value="rhizobiales_odb10">Rhizobiales</option>
        <option value="rhizobium-agrobacterium_group_odb10">Rhizobium-agrobacterium group</option>
        <option value="rhodobacterales_odb10">Rhodobacterales</option>
        <option value="rhodospirillales_odb10">Rhodospirillales</option>
        <option value="rickettsiales_odb10">Rickettsiales</option>
        <option value="saccharomycetes_odb10">Saccharomycetes</option>
        <option value="sauropsida_odb10">Sauropsida</option>
        <option value="selenomonadales_odb10">Selenomonadales</option>
        <option value="solanales_odb10">Solanales</option>
        <option value="sordariomycetes_odb10">Sordariomycetes</option>
        <option value="sphingobacteriia_odb10">Sphingobacteriia</option>
        <option value="sphingomonadales_odb10">Sphingomonadales</option>
        <option value="spirochaetales_odb10">Spirochaetales</option>
        <option value="spirochaetes_odb10">Spirochaetes</option>
        <option value="spirochaetia_odb10">Spirochaetia</option>
        <option value="stramenopiles_odb10">Stramenopiles</option>
        <option value="streptomycetales_odb10">Streptomycetales</option>
        <option value="streptosporangiales_odb10">Streptosporangiales</option>
        <option value="sulfolobales_odb10">Sulfolobales</option>
        <option value="synechococcales_odb10">Synechococcales</option>
        <option value="synergistetes_odb10">Synergistetes</option>
        <option value="tenericutes_odb10">Tenericutes</option>
        <option value="tetrapoda_odb10">Tetrapoda</option>
        <option value="thaumarchaeota_odb10">Thaumarchaeota</option>
        <option value="thermoanaerobacterales_odb10">Thermoanaerobacterales</option>
        <option value="thermoplasmata_odb10">Thermoplasmata</option>
        <option value="thermoproteales_odb10">Thermoproteales</option>
        <option value="thermoprotei_odb10">Thermoprotei</option>
        <option value="thermotogae_odb10">Thermotogae</option>
        <option value="thiotrichales_odb10">Thiotrichales</option>
        <option value="tissierellales_odb10">Tissierellales</option>
        <option value="tissierellia_odb10">Tissierellia</option>
        <option value="tremellomycetes_odb10">Tremellomycetes</option>
        <option value="verrucomicrobia_odb10">Verrucomicrobia</option>
        <option value="vertebrata_odb10">Vertebrata</option>
        <option value="vibrionales_odb10">Vibrionales</option>
        <option value="viridiplantae_odb10">Viridiplantae</option>
        <option value="xanthomonadales_odb10">Xanthomonadales</option>
    </param>
            </when>
        </conditional>
        <section name="adv" title="Advanced Options" expanded="False">
            <param argument="--evalue" type="float" value="0.001" min="0" max="1" label="E-value cutoff for BLAST searches." />
            <param argument="--limit" type="integer" value="3" label="How many candidate regions to consider" />
            <param name="outputs" type="select" optional="true" multiple="true" label="Which outputs should be generated">
                <option value="short_summary">short summary text</option>
                <option value="missing">list with missing IDs</option>
                <option value="image">summary image</option>
            </param>
        </section>
    </inputs>
    <outputs>
        <data name="busco_sum" format="txt" label="${tool.name} on ${on_string}: short summary" from_work_dir="busco_galaxy/run_*/short_summary.txt">
            <filter>adv['outputs'] and 'short_summary' in adv['outputs']</filter>
        </data>
        <data name="busco_table" format="tabular" label="${tool.name} on ${on_string}: full table" from_work_dir="busco_galaxy/run_*/full_table.tsv" />
        <data name="busco_missing" format="tabular" label="${tool.name} on ${on_string}: missing buscos" from_work_dir="busco_galaxy/run_*/missing_busco_list.tsv">
            <filter>adv['outputs'] and 'missing' in adv['outputs']</filter>
        </data>
        <data name="summary_image" format="png" label="${tool.name} on ${on_string}: summary image" from_work_dir="BUSCO_summaries/busco_figure.png">
            <filter>adv['outputs'] and 'image' in adv['outputs']</filter>
        </data>
    </outputs>
    <tests>
        <test expect_num_outputs="3">
            <param name="input" value="genome.fa" />
            <conditional name="lineage">
                <param name="lineage_mode" value="select_lineage" />
                <param name="lineage_dataset" value="arthropoda_odb10" />
            </conditional>
            <conditional name="busco_mode">
                <param name="mode" value="geno" />
                <conditional name="use_augustus">
                    <param name="use_augustus_selector" value="yes" />
                </conditional>
            </conditional>
            <section name="adv">
                <param name="outputs" value="short_summary,missing" />
            </section>
            <output name="busco_sum" file="genome_results/short_summary" compare="diff" lines_diff="4" />
            <output name="busco_table" file="genome_results/full_table" compare="diff" lines_diff="4" />
            <output name="busco_missing" file="genome_results/missing_buscos_list" compare="diff" lines_diff="4">
                <assert_contents>
                    <has_text text="# BUSCO version is: 5.2.2" />
                </assert_contents>
            </output>
        </test>
        <test expect_num_outputs="4">
            <param name="input" value="proteome.fa" />
            <conditional name="lineage">
                <param name="lineage_mode" value="select_lineage" />
                <param name="lineage_dataset" value="arthropoda_odb10" />
            </conditional>
            <conditional name="busco_mode">
                <param name="mode" value="prot" />
            </conditional>
            <section name="adv">
                <param name="outputs" value="short_summary,missing,image" />
            </section>
            <output name="busco_sum" file="proteome_results/short_summary" compare="diff" lines_diff="4" />
            <output name="busco_table" file="proteome_results/full_table" compare="diff" lines_diff="4" />
            <output name="busco_missing" file="proteome_results/missing_buscos_list" compare="diff" lines_diff="4" />
            <output name="summary_image" file="proteome_results/summary.png" compare="sim_size" />
        </test>
        <test expect_num_outputs="4">
            <param name="input" value="transcriptome.fa" />
            <conditional name="lineage">
                <param name="lineage_mode" value="auto_detect" />
                <param name="auto_lineage" value="--auto-lineage" />
            </conditional>
            <conditional name="busco_mode">
                <param name="mode" value="tran" />
            </conditional>
            <section name="adv">
                <param name="outputs" value="short_summary,missing,image" />
            </section>
            <output name="busco_sum" file="transcriptome_results/short_summary" compare="diff" lines_diff="4" />
            <output name="busco_table" file="transcriptome_results/full_table" compare="diff" lines_diff="4" />
            <output name="busco_missing" file="transcriptome_results/missing_buscos_list" compare="diff" lines_diff="4" />
            <output name="summary_image" file="transcriptome_results/summary.png" compare="sim_size" />
        </test>
        <test expect_num_outputs="2">
            <param name="input" value="genome.fa" />
            <conditional name="lineage">
                <param name="lineage_mode" value="select_lineage" />
                <param name="lineage_dataset" value="arthropoda_odb10" />
            </conditional>
            <conditional name="busco_mode">
                <param name="mode" value="geno" />
                <conditional name="use_augustus">
                    <param name="use_augustus_selector" value="yes" />
                    <conditional name="aug_prediction">
                        <param name="augustus_mode" value="builtin" />
                        <param name="augustus_species" value="human" />
                    </conditional>
                </conditional>
            </conditional>
            <section name="adv">
                <param name="outputs" value="short_summary" />
            </section>
            <output name="busco_sum" file="genome_results/short_summary" compare="diff" lines_diff="4" />
            <output name="busco_table" file="genome_results/full_table" compare="diff" lines_diff="4" />
        </test>
        <test expect_num_outputs="3">
            <param name="input" value="genome.fa" />
            <conditional name="lineage">
                <param name="lineage_mode" value="select_lineage" />
                <param name="lineage_dataset" value="arthropoda_odb10" />
            </conditional>
            <conditional name="busco_mode">
                <param name="mode" value="geno" />
                <conditional name="use_augustus">
                    <param name="use_augustus_selector" value="yes" />
                    <conditional name="aug_prediction">
                        <param name="augustus_mode" value="history" />
                        <param name="augustus_model" value="local.tar.gz" ftype="augustus" />
                    </conditional>
                </conditional>
            </conditional>
            <section name="adv">
                <param name="outputs" value="short_summary,missing" />
            </section>
            <output name="busco_sum" file="genome_results/short_summary" compare="diff" lines_diff="4" />
            <output name="busco_table" file="genome_results/full_table" compare="diff" lines_diff="4" />
            <output name="busco_missing" file="genome_results/missing_buscos_list" compare="diff" lines_diff="4" />
        </test>
        <test expect_num_outputs="4">
            <param name="input" value="genome.fa" />
            <conditional name="lineage">
                <param name="lineage_mode" value="select_lineage" />
                <param name="lineage_dataset" value="arthropoda_odb10" />
            </conditional>
            <conditional name="busco_mode">
                <param name="mode" value="geno" />
                <conditional name="use_augustus">
                    <param name="use_augustus_selector" value="no" />
                </conditional>
            </conditional>
            <section name="adv">
                <param name="outputs" value="short_summary,missing,image" />
            </section>
            <output name="busco_sum" file="genome_results_metaeuk/short_summary" compare="diff" lines_diff="4" />
            <output name="busco_table" file="genome_results_metaeuk/full_table" compare="diff" lines_diff="4" />
            <output name="busco_missing" file="genome_results_metaeuk/missing_buscos_list" compare="diff" lines_diff="4" />
            <output name="summary_image" file="genome_results_metaeuk/summary.png" compare="sim_size" />
        </test>
    </tests>
    <help>


BUSCO: assessing genome assembly and annotation completeness with Benchmarking Universal Single-Copy Orthologs
--------------------------------------------------------------------------------------------------------------

Interpreting the results
^^^^^^^^^^^^^^^^^^^^^^^^

BUSCO_ attempts to provide a quantitative assessment of the completeness in terms of the expected gene content of a
genome assembly, transcriptome, or annotated gene set. The results are simplified into categories of Complete
and single-copy, Complete and duplicated, Fragmented, or Missing BUSCOs.

BUSCO completeness results make sense only in the context of the biology of your organism.
You have to understand whether missing or duplicated genes are of biological or technical origin.
For instance, a high level of duplication may be explained by a recent whole duplication event
(biological) or a chimeric assembly of haplotypes (technical).
Transcriptomes and protein sets that are not filtered for isoforms will lead to a high proportion of duplicates.
Therefore you should filter them before a BUSCO analysis.
Finally, focusing on specific tissues or specific life stages and conditions in a transcriptomic experiment
is unlikely to produce a BUSCO-complete transcriptome. In this case, consistency across your samples
is what you will be aiming for.

For more information please refer to the Busco_ `user guide &lt;https: / /busco.ezlab.org /busco_userguide.html#interpreting-the-results&gt;`_
.

.. _BUSCO: http://busco.ezlab.org/

        </help>
    <citations>
            <citation type="doi">10.1093/bioinformatics/btv351</citation>
        </citations>
    </tool>