<tool id="test" name="test" version="1">

    <inputs>
        <param name="augustus_species" type="select" label="Augustus species model">
            <expand macro="augustus_species" />
        </param>
    </inputs>
        
    <macros>

        <token name="@TOOL_VERSION@">5.2.2</token>
        <token name="@VERSION_SUFFIX@">1</token>
        
        <xml name="augustus_species">
            <option value="human">Homo sapiens</option>
            <option value="fly">Drosophila melanogaster</option>
            <option value="arabidopsis">Arabidopsis thaliana</option>
        </xml>

        <xml name="citations">
            <citations>
                <citation type="doi">10.1093/bioinformatics/btv351</citation>
            </citations>
        </xml>

        <!-- recursive macros -->
        <xml name="plant">
            <citations>
                <citation type="doi">another doi</citation>
            </citations>
            <expand macro="citations" />
        </xml>

        <!-- yield -->
        <xml name="refGenomeSourceConditional">
            <param name="index" type="select" label="Select a reference genome" help="If your genome of interest is not listed, contact the Galaxy team">
                  <yield />
            </param>            
        </xml>

        <expand macro="refGenomeSourceConditional">
            <options from_data_table="tophat_indexes">
                <filter type="sort_by" column="2"/>
                <validator type="no_options" message="No genomes are available for the selected input dataset"/>
            </options>
        </expand>

    </macros>
</tool>